# 日志分析之shell篇

shell是日志分析最基础，也是最强大的工具之一。本文用到的样例数据文件[在这里](/_img/log-sample01.log)，格式如下：

```
[GIN] 2016/11/21 - 16:50:36 |[97;42m 204 [0m|     441.717µs | 121.69.49.144 |[97;46m  [0m POST    /bid/adview
[GIN] 2016/11/21 - 16:50:36 |[97;42m 204 [0m|     773.736µs | 121.69.49.138 |[97;46m  [0m POST    /bid/adview
[GIN] 2016/11/21 - 16:50:36 |[97;42m 200 [0m|      49.519µs | 121.69.49.144 |[97;44m  [0m GET     /win/adview
[GIN] 2016/11/21 - 16:50:36 |[97;42m 204 [0m|     462.392µs | 121.69.49.139 |[97;46m  [0m POST    /bid/adview
[GIN] 2016/11/21 - 16:50:36 |[97;42m 204 [0m|     503.733µs | 121.69.49.145 |[97;46m  [0m POST    /bid/adview
[GIN] 2016/11/21 - 16:50:36 |[97;42m 204 [0m|     430.477µs | 121.69.49.138 |[97;46m  [0m POST    /bid/adview
[GIN] 2016/11/21 - 16:50:37 |[97;42m 204 [0m|    2.462103ms | 121.69.49.138 |[97;46m  [0m POST    /bid/adview
```

这是supervisor记录到的接口的访问日志，对于本文需要用到的字段：

- 日期时间
- http响应码：主要是200和204两种
- 响应时间
- 接口地址

通过对日志的分析，需要达到目标：

- 不同响应码的占比，主要关注除200和204之外的响应码，例如400，500，404等，这是异常导致的
- 不同状态码下的相应时间分布
- /bid/adview接口下的200状态码的平均响应时间，TOP90%的响应时间，TOP99%的响应时间，和响应时间超过50ms的占比





